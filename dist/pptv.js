!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("request")):"function"==typeof define&&define.amd?define(["request"],t):"object"==typeof exports?exports.qiguoPlayManage=t(require("request")):e.qiguoPlayManage=t(e.request)}(this,function(e){return webpackJsonpqiguoPlayManage([7],{0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){e.sort(function(e,t){return t.bittype-e.bittype});var t=e.length?e[0].bittype:void 0,i={};return e.forEach(function(e){i[e.bittype]||(i[e.bittype]=e.url)}),{highestDefintion:t,definitions:i}};t.buildPlayStreams=n},17:function(t,i){t.exports=e},73:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitions=void 0;var o=i(1),r=n(o),a=i(2),u=n(a),f=i(3),c=i(0),d=(0,u.default)(function(e,t){(0,f.fetch)({url:e,headers:{"User-Agent":"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}},function(e){t(null,e)})}),l=(0,u.default)(function(e,t){var i=void 0,n=null;try{i=e.match(/var\s?webcfg\s?=\s?.+(id|vid)":([^,]+)/)[2]}catch(e){n="step:getVidFromBodyStr 获取 vid失败"}t(n,i)}),s=(0,u.default)(function(e,t){(0,f.fetch)({url:"http://web-play.pptv.com/webplay3-0-"+e+".xml?type=web.fpp&version=4"},function(e){t(null,e)})}),p=(0,u.default)(function(e,t){var i=[],n=null,o=void 0;try{var r=e.match(/item\srid="([^"]+).mp4[^>]+/gi),a=e.match(/<dragdata.+/gi),u=e.match(/<sh>[^<]+/gi),f=e.match(/<key[^<]+/gi);o=a[0].match(/du="(\d+(\.\d+)?)"/)[1],o=parseInt(o,10);for(var d=0;d<r.length;d+=1){for(var l={},s=r[d],p=s.match(/rid="([^"]+.mp4)/)[1],h=parseInt(s.match(/ft="(\d+)/)[1],10),m=u[h].replace("<sh>",""),y=f[h].match(/>(.+)/)[1],g=a[h],v=g.match(/no="\d+"/gi),b=g.match(/dur="\d+\.?\d+"/gi),M=[],q=0;q<v.length;q+=1){var P={},k=v[q].match(/\d+/)[0],_=b[q].match(/\d+\.?\d+/)[0],w="http://"+m+"/"+k+"/"+p+"?key=&k="+y+"&fpp.ver=1.3.0.4&type=web.fpp";P.url=w,P.duration=_,M.push(P)}l.bittype=h+1,l.url=M,i.push(l)}}catch(e){n="多段视频获取失败 "+e.message}var x=(0,c.buildPlayStreams)(i),D=x.definitions,S=x.highestDefintion;t(null,{err:n,definitions:D,highestDefintion:S,duration:o})}),h=function(e,t){(0,r.default)([d(e),l(),s(),p()],function(e,i){t(e,{multiVideoDefintions:i})})};t.getDefinitions=h}},[73])});