!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("request")):"function"==typeof define&&define.amd?define(["request"],t):"object"==typeof exports?exports.qiguoPlayManage=t(require("request")):e.qiguoPlayManage=t(e.request)}(this,function(e){return webpackJsonpqiguoPlayManage([5],{0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){e.sort(function(e,t){return t.bittype-e.bittype});var t=e.length?e[0].bittype:void 0,i={};return e.forEach(function(e){i[e.bittype]||(i[e.bittype]=e.url)}),{highestDefintion:t,definitions:i}};t.buildPlayStreams=n},17:function(t,i){t.exports=e},75:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitions=void 0;var o=i(1),a=n(o),l=i(2),u=n(l),r=i(3),f=i(0),s=(0,u.default)(function(e,t){(0,r.fetch)({url:e,headers:{"User-Agent":"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}},function(e){t(null,e)})}),c=(0,u.default)(function(e,t){var i=void 0,n=void 0,o=void 0,a=null;try{i=e.match(/_playId\s?=\s?'(\d+)'/)[1],n=e.match(/_playKey\s?=\s?'(.+)'/)[1],o=e.match(/_playUrl\s?=\s?'(.+)'/)[1]}catch(e){a="step:getPageInfo From bodyStr failed "+e.message}t(a,{playId:i,playKey:n,playUrl:o})}),p=(0,u.default)(function(e,t){var i=e.playId,n=e.playKey,o=e.playUrl,a=(new Date).getTime(),l=null;(0,r.fetch)({url:"http://apiontime.wasu.cn/Auth/getVideoUrl?id="+i+"&key="+n+"&url="+o+"&type=jsonp&callback=&_="+a},function(e){try{e=e.match(/\("(.+)"\)/)[1],e=e.replace(/\\/gi,"").replace(/"/gi,"")}catch(e){l="获取playInfo失败 "+e.message}t(l,e)})}),d=(0,u.default)(function(e,t){(0,r.fetch)({url:"http://api.video.browser.tvall.cn:8888/video/api/play/wasu?data="+encodeURIComponent(e)+"&action=parseUrl"},function(e){var i=[{bittype:3,url:e}],n=(0,f.buildPlayStreams)(i),o=n.definitions,a=n.highestDefintion;t(null,{definitions:o,highestDefintion:a})})}),y=function(e,t){(0,a.default)([s(e),c(),p(),d()],function(e,i){t(e,{singleVideoDefintions:i})})};t.getDefinitions=y}},[75])});