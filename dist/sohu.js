!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("request")):"function"==typeof define&&define.amd?define(["request"],t):"object"==typeof exports?exports.qiguoPlayManage=t(require("request")):e.qiguoPlayManage=t(e.request)}(this,function(e){return webpackJsonpqiguoPlayManage([6],{0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){e.sort(function(e,t){return t.bittype-e.bittype});var t=e.length?e[0].bittype:void 0,i={};return e.forEach(function(e){i[e.bittype]||(i[e.bittype]=e.url)}),{highestDefintion:t,definitions:i}};t.buildPlayStreams=n},17:function(t,i){t.exports=e},74:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitions=void 0;var o=i(1),r=n(o),a=i(2),u=n(a),l=i(3),f=i(0),s=function(){var e=Math.floor(768),t=Math.floor(1024),i=Math.floor(Math.sqrt(e*e+t*t))||0,n=Math.round(2)||1;return 1e3*(new Date).getTime()+n+i+Math.round(1e3*Math.random())},c=(0,u.default)(function(e,t,i){var n=void 0,o=(new Date).getTime();(0,l.fetch)({url:e,headers:{"User-Agent":"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}},function(r){try{n=r.match(/vid[=:]"?(\d+)/)[1]}catch(e){console.log("获取页面 vid 失败:"+e.message)}i(null,{url:e,vid:n,uid:t,tm:o})})}),d=(0,u.default)(function(e,t){var i=e.url,n=e.tm,o=e.uid,r=e.vid;i=i.match(/[^?]+/)[0],(0,l.fetch)({url:"http://z.m.tv.sohu.com/h5_cc.gif?t="+n+"&uid="+o+"&vid="+r+"&url="+encodeURIComponent(i)+"&refer=&screen=768x1024&os=ios&platform=ipad&passport=&position=play_verify&op=click&details=%7B%7D&nid=",headers:{Cookie:"SOHUSVP=CYkfNIYACgckJayhsTAuKh2JF9MSGCv2ms4dFMXlxos",Referer:i,"User-Agent":"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}},function(){t(null,e)})}),p=(0,u.default)(function(e,t,i){setTimeout(function(){i(null,t)},e)}),h=(0,u.default)(function(e,t){var i=e.vid,n=e.uid,o=e.tm,r=null;(0,l.fetch)({url:"http://m.tv.sohu.com/phone_playinfo?callback=&vid="+i+"&site=1&appid=tv&api_key=f351515304020cad28c92f70f002261c&plat=17&sver=1.0&partner=1&uid="+n+"&muid=1487839109370793&_c=1&pt=2&qd=680&src=10150001&_="+o},function(e){try{e=JSON.parse(e)}catch(e){r="获取playInfo 失败 "+e.message}t(r,e)})}),y=(0,u.default)(function(e,t){var i=[],n=null;try{var o=e.data,r=o.urls.m3u8,a=new Map([["nor","2"],["hig","3"],["sup","4"]]),u=!0,l=!1,s=void 0;try{for(var c,d=Object.keys(r)[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var p=c.value,h={};h.bittype=a.get(p),h.bittype&&(h.url=r[p][0],h.url&&i.push(h))}}catch(n){l=!0,s=n}finally{try{!u&&d.return&&d.return()}finally{if(l)throw s}}}catch(e){n="getResult失败 "+e.message}var y=(0,f.buildPlayStreams)(i),v=y.definitions,m=y.highestDefintion;t(n,{err:n,definitions:v,highestDefintion:m})}),v=function(e,t){(0,r.default)([c(e,s()),d(),p(1e3),h(),y()],function(e,i){t(e,{singleVideoDefintions:i})})};t.getDefinitions=v}},[74])});