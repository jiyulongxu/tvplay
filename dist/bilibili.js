!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("request")):"function"==typeof define&&define.amd?define(["request"],e):"object"==typeof exports?exports.qiguoPlayManage=e(require("request")):t.qiguoPlayManage=e(t.request)}(this,function(t){return webpackJsonpqiguoPlayManage([0],[,,,,function(t,e,n){"use strict";function r(t){return null!=t&&u(t.length)&&!o(t)}var o=n(41),u=n(12);t.exports=r},,function(t,e,n){"use strict";function r(t){return null==t?void 0===t?c:f:l&&l in Object(t)?u(t):i(t)}var o=n(9),u=n(32),i=n(37),f="[object Null]",c="[object Undefined]",l=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==(void 0===t?"undefined":o(t))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r},,function(t,e,n){"use strict";var r=n(11),o=r.Symbol;t.exports=o},function(t,e,n){"use strict";(function(e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===e?"undefined":n(e))&&e&&e.Object===Object&&e;t.exports=r}).call(e,n(45))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(10),u="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,i=o||u||Function("return this")();t.exports=i},function(t,e,n){"use strict";function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}var o=9007199254740991;t.exports=r},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={},t.exports=e.default},,,function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,r){(0,i.default)(e)(t,(0,c.default)(n),r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(23),i=r(u),f=n(5),c=r(f);t.exports=e.default},function(t,e,n){"use strict";function r(t,e){return function(n,r,o){return t(n,e,r,o)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e.default},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){(0,c.default)(i.default,t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(46),i=r(u),f=n(47),c=r(f);t.exports=e.default},function(t,e,n){"use strict";function r(t,e){for(var n,r=[],o=0,u="",i=0;i<256;i++)r[i]=i;for(i=0;i<256;i++)o=(o+r[i]+t.charCodeAt(i%t.length))%256,n=r[i],r[i]=r[o],r[o]=n;i=0,o=0;for(var f=0;f<e.length;f++)i=(i+1)%256,o=(o+r[i])%256,n=r[i],r[i]=r[o],r[o]=n,u+=String.fromCharCode(e.charCodeAt(f)^r[(r[i]+r[o])%256]);return u}function o(t){if(!t)return"";t=t.toString();var e,n,r,o,u,i,f,c=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(i=t.length,u=0,f="";u<i;){do{e=c[255&t.charCodeAt(u++)]}while(u<i&&-1==e);if(-1==e)break;do{n=c[255&t.charCodeAt(u++)]}while(u<i&&-1==n);if(-1==n)break;f+=String.fromCharCode(e<<2|(48&n)>>4);do{if(61==(r=255&t.charCodeAt(u++)))return f;r=c[r]}while(u<i&&-1==r);if(-1==r)break;f+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&t.charCodeAt(u++)))return f;o=c[o]}while(u<i&&-1==o);if(-1==o)break;f+=String.fromCharCode((3&r)<<6|o)}return f}function u(t){for(var e=0;;){if(e>=8)return 185025305^t;t=(t>>1)+((1&t)<<31),++e}}Object.defineProperty(e,"__esModule",{value:!0});var i={};!function(t){function e(t,e){var n=t[0],f=t[1],c=t[2],l=t[3];n=r(n,f,c,l,e[0],7,-680876936),l=r(l,n,f,c,e[1],12,-389564586),c=r(c,l,n,f,e[2],17,606105819),f=r(f,c,l,n,e[3],22,-1044525330),n=r(n,f,c,l,e[4],7,-176418897),l=r(l,n,f,c,e[5],12,1200080426),c=r(c,l,n,f,e[6],17,-1473231341),f=r(f,c,l,n,e[7],22,-45705983),n=r(n,f,c,l,e[8],7,1770035416),l=r(l,n,f,c,e[9],12,-1958414417),c=r(c,l,n,f,e[10],17,-42063),f=r(f,c,l,n,e[11],22,-1990404162),n=r(n,f,c,l,e[12],7,1804603682),l=r(l,n,f,c,e[13],12,-40341101),c=r(c,l,n,f,e[14],17,-1502002290),f=r(f,c,l,n,e[15],22,1236535329),n=o(n,f,c,l,e[1],5,-165796510),l=o(l,n,f,c,e[6],9,-1069501632),c=o(c,l,n,f,e[11],14,643717713),f=o(f,c,l,n,e[0],20,-373897302),n=o(n,f,c,l,e[5],5,-701558691),l=o(l,n,f,c,e[10],9,38016083),c=o(c,l,n,f,e[15],14,-660478335),f=o(f,c,l,n,e[4],20,-405537848),n=o(n,f,c,l,e[9],5,568446438),l=o(l,n,f,c,e[14],9,-1019803690),c=o(c,l,n,f,e[3],14,-187363961),f=o(f,c,l,n,e[8],20,1163531501),n=o(n,f,c,l,e[13],5,-1444681467),l=o(l,n,f,c,e[2],9,-51403784),c=o(c,l,n,f,e[7],14,1735328473),f=o(f,c,l,n,e[12],20,-1926607734),n=u(n,f,c,l,e[5],4,-378558),l=u(l,n,f,c,e[8],11,-2022574463),c=u(c,l,n,f,e[11],16,1839030562),f=u(f,c,l,n,e[14],23,-35309556),n=u(n,f,c,l,e[1],4,-1530992060),l=u(l,n,f,c,e[4],11,1272893353),c=u(c,l,n,f,e[7],16,-155497632),f=u(f,c,l,n,e[10],23,-1094730640),n=u(n,f,c,l,e[13],4,681279174),l=u(l,n,f,c,e[0],11,-358537222),c=u(c,l,n,f,e[3],16,-722521979),f=u(f,c,l,n,e[6],23,76029189),n=u(n,f,c,l,e[9],4,-640364487),l=u(l,n,f,c,e[12],11,-421815835),c=u(c,l,n,f,e[15],16,530742520),f=u(f,c,l,n,e[2],23,-995338651),n=i(n,f,c,l,e[0],6,-198630844),l=i(l,n,f,c,e[7],10,1126891415),c=i(c,l,n,f,e[14],15,-1416354905),f=i(f,c,l,n,e[5],21,-57434055),n=i(n,f,c,l,e[12],6,1700485571),l=i(l,n,f,c,e[3],10,-1894986606),c=i(c,l,n,f,e[10],15,-1051523),f=i(f,c,l,n,e[1],21,-2054922799),n=i(n,f,c,l,e[8],6,1873313359),l=i(l,n,f,c,e[15],10,-30611744),c=i(c,l,n,f,e[6],15,-1560198380),f=i(f,c,l,n,e[13],21,1309151649),n=i(n,f,c,l,e[4],6,-145523070),l=i(l,n,f,c,e[11],10,-1120210379),c=i(c,l,n,f,e[2],15,718787259),f=i(f,c,l,n,e[9],21,-343485551),t[0]=s(n,t[0]),t[1]=s(f,t[1]),t[2]=s(c,t[2]),t[3]=s(l,t[3])}function n(t,e,n,r,o,u){return e=s(s(e,t),s(r,u)),s(e<<o|e>>>32-o,n)}function r(t,e,r,o,u,i,f){return n(e&r|~e&o,t,e,u,i,f)}function o(t,e,r,o,u,i,f){return n(e&o|r&~o,t,e,u,i,f)}function u(t,e,r,o,u,i,f){return n(e^r^o,t,e,u,i,f)}function i(t,e,r,o,u,i,f){return n(r^(e|~o),t,e,u,i,f)}function f(t){/[\x80-\xFF]/.test(t)&&(t=unescape(encodeURI(t)));var n,r=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(o,c(t.substring(n-64,n)));t=t.substring(n-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)u[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(u[n>>2]|=128<<(n%4<<3),n>55)for(e(o,u),n=0;n<16;n++)u[n]=0;return u[14]=8*r,e(o,u),o}function c(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function l(t){for(var e="",n=0;n<4;n++)e+=d[t>>8*n+4&15]+d[t>>8*n&15];return e}function a(t){for(var e=0;e<t.length;e++)t[e]=l(t[e]);return t.join("")}function s(t,e){return t+e&4294967295}var d="0123456789abcdef".split(""),p=function(t){return a(f(t))};if("5d41402abc4b2a76b9719d911017c592"!=p("hello"));t.md5=p}(i);var f=i.md5;e.md5=f,e.decodeAcfun=r,e.base64DecodeAcfun=o,e.getLetvKey=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return function(e,n,r){function o(t,e){if(s-=1,t)l=!0,r(t);else{if(e===y.default||l&&s<=0)return l=!0,r(null);u()}}function u(){for(;s<t&&!l;){var e=f();if(null===e)return l=!0,void(s<=0&&r(null));s+=1,n(e.value,e.key,(0,d.default)(o))}}if(r=(0,c.default)(r||i.default),t<=0||!e)return r(null);var f=(0,a.default)(e),l=!1,s=0;u()}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(8),i=r(u),f=n(15),c=r(f),l=n(25),a=r(l),s=n(20),d=r(s),p=n(14),y=r(p);t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return r&&t[r]&&t[r]()};var r="function"==typeof Symbol&&Symbol.iterator;t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}function u(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function i(t){var e=(0,p.default)(t),n=-1,r=e.length;return function(){var o=e[++n];return n<r?{value:t[o],key:o}:null}}function f(t){if((0,l.default)(t))return o(t);var e=(0,s.default)(t);return e?u(e):i(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=f;var c=n(4),l=r(c),a=n(24),s=r(a),d=n(43),p=r(d);t.exports=e.default},function(t,e,n){"use strict";function r(t,e){var n=i(t),r=!n&&u(t),a=!n&&!r&&f(t),d=!n&&!r&&!a&&l(t),p=n||r||a||d,y=p?o(t.length,String):[],b=y.length;for(var v in t)!e&&!s.call(t,v)||p&&("length"==v||a&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,b))||y.push(v);return y}var o=n(30),u=n(39),i=n(48),f=n(40),c=n(33),l=n(42),a=Object.prototype,s=a.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t){return u(t)&&o(t)==i}var o=n(6),u=n(7),i="[object Arguments]";t.exports=r},function(t,e,n){"use strict";function r(t){return i(t)&&u(t.length)&&!!f[o(t)]}var o=n(6),u=n(12),i=n(7),f={};f["[object Float32Array]"]=f["[object Float64Array]"]=f["[object Int8Array]"]=f["[object Int16Array]"]=f["[object Int32Array]"]=f["[object Uint8Array]"]=f["[object Uint8ClampedArray]"]=f["[object Uint16Array]"]=f["[object Uint32Array]"]=!0,f["[object Arguments]"]=f["[object Array]"]=f["[object ArrayBuffer]"]=f["[object Boolean]"]=f["[object DataView]"]=f["[object Date]"]=f["[object Error]"]=f["[object Function]"]=f["[object Map]"]=f["[object Number]"]=f["[object Object]"]=f["[object RegExp]"]=f["[object Set]"]=f["[object String]"]=f["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){"use strict";function r(t){if(!o(t))return u(t);var e=[];for(var n in Object(t))f.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(34),u=n(35),i=Object.prototype,f=i.hasOwnProperty;t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=r},function(t,e,n){"use strict";function r(t){return function(e){return t(e)}}t.exports=r},function(t,e,n){"use strict";function r(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=f.call(t);return r&&(e?t[c]=n:delete t[c]),o}var o=n(9),u=Object.prototype,i=u.hasOwnProperty,f=u.toString,c=o?o.toStringTag:void 0;t.exports=r},function(t,e,n){"use strict";function r(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||u.test(t))&&t>-1&&t%1==0&&t<e}var o=9007199254740991,u=/^(?:0|[1-9]\d*)$/;t.exports=r},function(t,e,n){"use strict";function r(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||o)}var o=Object.prototype;t.exports=r},function(t,e,n){"use strict";var r=n(38),o=r(Object.keys,Object);t.exports=o},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(10),u="object"==r(e)&&e&&!e.nodeType&&e,i=u&&"object"==r(t)&&t&&!t.nodeType&&t,f=i&&i.exports===u,c=f&&o.process,l=function(){try{return c&&c.binding&&c.binding("util")}catch(t){}}();t.exports=l}).call(e,n(13)(t))},function(t,e,n){"use strict";function r(t){return u.call(t)}var o=Object.prototype,u=o.toString;t.exports=r},function(t,e,n){"use strict";function r(t,e){return function(n){return t(e(n))}}t.exports=r},function(t,e,n){"use strict";var r=n(27),o=n(7),u=Object.prototype,i=u.hasOwnProperty,f=u.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(t){return o(t)&&i.call(t,"callee")&&!f.call(t,"callee")};t.exports=c},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(11),u=n(44),i="object"==r(e)&&e&&!e.nodeType&&e,f=i&&"object"==r(t)&&t&&!t.nodeType&&t,c=f&&f.exports===i,l=c?o.Buffer:void 0,a=l?l.isBuffer:void 0,s=a||u;t.exports=s}).call(e,n(13)(t))},function(t,e,n){"use strict";function r(t){if(!u(t))return!1;var e=o(t);return e==f||e==c||e==i||e==l}var o=n(6),u=n(49),i="[object AsyncFunction]",f="[object Function]",c="[object GeneratorFunction]",l="[object Proxy]";t.exports=r},function(t,e,n){"use strict";var r=n(28),o=n(31),u=n(36),i=u&&u.isTypedArray,f=i?o(i):r;t.exports=f},function(t,e,n){"use strict";function r(t){return i(t)?o(t):u(t)}var o=n(26),u=n(29),i=n(4);t.exports=r},function(t,e,n){"use strict";function r(){return!1}t.exports=r},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){function r(t,e){t?n(t):++u!==i&&e!==c.default||n(null)}n=(0,v.default)(n||y.default);var o=0,u=0,i=t.length;for(0===i&&n(null);o<i;o++)e(t[o],o,(0,g.default)(r))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){((0,i.default)(t)?o:_)(t,(0,j.default)(e),n)};var u=n(4),i=r(u),f=n(14),c=r(f),l=n(18),a=r(l),s=n(19),d=r(s),p=n(8),y=r(p),b=n(15),v=r(b),m=n(20),g=r(m),h=n(5),j=r(h),_=(0,d.default)(a.default,1/0);t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n){n=n||i.default;var r=(0,c.default)(e)?[]:{};t(e,function(t,e,n){(0,d.default)(t)(function(t,o){arguments.length>2&&(o=(0,a.default)(arguments,1)),r[e]=o,n(t)})},function(t){n(t,r)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(8),i=r(u),f=n(4),c=r(f),l=n(16),a=r(l),s=n(5),d=r(s);t.exports=e.default},,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return u.default.apply(null,(0,f.default)(arguments).reverse())};var o=n(53),u=r(o),i=n(16),f=r(i);t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(18),u=r(o),i=n(19),f=r(i);e.default=(0,f.default)(u.default,1),t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,r){r=(0,a.default)(r||c.default);var o=(0,d.default)(n);(0,i.default)(t,function(t,n,r){o(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(51),i=r(u),f=n(8),c=r(f),l=n(15),a=r(l),s=n(5),d=r(s);t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(){var t=(0,y.default)(arguments,d.default);return function(){var e=(0,c.default)(arguments),n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=i.default,(0,a.default)(t,e,function(t,e,r){e.apply(n,t.concat(function(t){var e=(0,c.default)(arguments,1);r(t,e)}))},function(t,e){r.apply(n,[t].concat(e))})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var u=n(8),i=r(u),f=n(16),c=r(f),l=n(52),a=r(l),s=n(5),d=r(s),p=n(54),y=r(p);t.exports=e.default},function(t,e,n){"use strict";function r(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}t.exports=r},,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getDefinitions=e.getResult=e.getPlayStreams=e.judgePlayInfo=e.getPlayInfo=e.getMovieTypeCid=e.getAnimeTypeCid=e.getCid=void 0;var o=function(){function t(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var i,f=t[Symbol.iterator]();!(r=(i=f.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{!r&&f.return&&f.return()}finally{if(o)throw u}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(1),i=r(u),f=n(50),c=r(f),l=n(21),a=r(l),s=n(2),d=r(s),p=n(3),y=n(22),b=(0,d.default)(function(t,e){(0,p.fetch)({url:t,headers:{"User-Agent":"Mozilla/5.0 (iPad; CPU OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"}},function(t){e(null,t)})}),v=function(t,e){var n=t.bodyStr,r=t.token,o=void 0,u=null;try{o=n.match(/"aid",\s?"(\d+)"/)[1]}catch(t){u="step:getAidFromBodyStr movie type 获取 aid失败"}e(u,{aid:o,token:r})},m=(0,d.default)(function(t){var e=void 0,n=null;(0,p.fetch)({url:"http://bangumi.bilibili.com/web_api/get_token"},function(r){try{var o=JSON.parse(r);e=o.result.token}catch(t){n="step:getToken movie type 获取token失败"}t(n,e)})}),g=function(t,e){var n=t.aid,r=t.token,o=void 0,u=null;(0,p.fetch)({url:"http://bangumi.bilibili.com/web_api/get_source",isPost:!0,form:{movie_aid:n,token:r}},function(t){try{var n=JSON.parse(t);o=n.result.cid}catch(t){u="step:getCidFromApi movie type 获取token失败"}e(u,o)})},h=function(t,e){var n=void 0,r=null,o=t.match(/#\d+/)[0].replace("#","");(0,p.fetch)({url:"http://bangumi.bilibili.com/web_api/episode/"+o+".json"},function(t){try{t=JSON.parse(t);var o=t.result.currentEpisode;n=o.danmaku}catch(t){r="step:getAnimeTypeCid anime type 获取 cid 失败 "+t.message}e(r,n)})},j=(0,c.default)(g,v,(0,d.default)(function(t,e){(0,a.default)({bodyStr:b(t),token:m()},e)})),_=function(t,e){var n=t.match(/\d+/)[0],r=void 0,o=null;/m.bilibili.com/.test(t)&&(t="http://www.bilibili.com/video/av"+n),(0,p.fetch)({url:t,gzip:!0},function(t){try{r=t.match(/"cid=(\d+)&/)[1]}catch(t){o="step:getNoramlTypeCid normal type 获取 cid 失败 "+t.message}e(o,r)})},S=(0,d.default)(function(t,e,n,r,u){var i=r,f=new Map([[/bangumi\.bilibili\.com.+anime.+/,e],[/bangumi\.bilibili\.com.+movie.+/,n]]),c=!0,l=!1,a=void 0;try{for(var s,d=f[Symbol.iterator]();!(c=(s=d.next()).done);c=!0){var p=o(s.value,2),y=p[0],b=p[1];if(y.test(t)){i=b;break}}}catch(t){l=!0,a=t}finally{try{!c&&d.return&&d.return()}finally{if(l)throw a}}i(t,u)}),x=(0,d.default)(function(t,e,n){var r=t.quality,o=t.type,u=null,i="appkey=YvirImLGlLANCLvM&build=4070&buvid=3168fe38e580b16a02c2cc9beceaf6b7&cid="+e+"&device=phone&otype=json&platform=android&quality="+r+"&type="+o,f=(0,y.md5)(i+"JNlZNgfNGKZEpaDTkCdPQVXntXhuiJEM");(0,p.fetch)({url:"http://interface.bilibili.com/playurl?"+i+"&sign="+f},function(t){try{t=JSON.parse(t)}catch(t){u="获取playInfo 失败 "+t.message}n(u,{cid:e,playInfo:t})})}),O=(0,d.default)(function(t,e){var n=t.playInfo,r=t.cid,o=n,u=o.code;-5009===u||-5051===u?(console.log("fanwei1"),n=null,e(null,n)):n.durl&&n.durl[0]&&n.durl[0].url?e(null,n):x({quality:3,type:"flv"},r)(e)}),A=(0,d.default)(function(t,e){var n=void 0,r=null;if(t)try{n=t.durl[0].url}catch(t){r="getPlayStreams 获取播放地址失败 "+t.message}else n="http://static.hdslb.com/error.mp4";e(r,{3:n})}),M=(0,d.default)(function(t,e){e(null,{singleVideoDefintions:{definitions:t,highestDefintion:3}})}),P=function(t,e){(0,i.default)([S(t,h,j,_),x({quality:3,type:"mp4"}),O(),A(),M()],function(t,n){e(t,n)})};e.getCid=S,e.getAnimeTypeCid=h,e.getMovieTypeCid=j,e.getPlayInfo=x,e.judgePlayInfo=O,e.getPlayStreams=A,e.getResult=M,e.getDefinitions=P}],[68])});