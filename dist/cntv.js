!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("request")):"function"==typeof define&&define.amd?define(["request"],t):"object"==typeof exports?exports.qiguoPlayManage=t(require("request")):e.qiguoPlayManage=t(e.request)}(this,function(e){return webpackJsonpqiguoPlayManage([8],{0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){e.sort(function(e,t){return t.bittype-e.bittype});var t=e.length?e[0].bittype:void 0,i={};return e.forEach(function(e){i[e.bittype]||(i[e.bittype]=e.url)}),{highestDefintion:t,definitions:i}};t.buildPlayStreams=n},17:function(t,i){t.exports=e},69:function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDefinitions=void 0;var o=i(1),u=n(o),r=i(2),c=n(r),a=i(3),s=i(0),f=(0,c.default)(function(e,t,i){var n=null,o=void 0;if(t)i(null,t);else{try{o=e.match(/videoID=(\w+)/)[1]}catch(e){console.log(e.message)}if(!o)try{o=e.match(/(\w+)\.shtml/)[1]}catch(e){console.log(e.message)}(0,a.fetch)({url:"http://api.cntv.cn/list/getBottomPageList?serviceId=tvcctv&id="+o},function(e){try{e=JSON.parse(e),t=e.video_shared_code}catch(e){n="获取vid失败 "+e.message}i(n,t)})}}),l=(0,c.default)(function(e,t){var i=void 0;(0,a.fetch)({url:e},function(e){try{i=e.match(/videoCenterId","(\w+)"/)[1]}catch(e){console.log("从页面获取vid失败: "+e.message)}t(null,i)})}),d=(0,c.default)(function(e,t){(0,u.default)([l(e),f(e)],t)}),p=(0,c.default)(function(e,t){var i=null;(0,a.fetch)({url:"http://vdn.apps.cntv.cn/api/getHttpVideoInfo.do?pid="+e},function(e){var n=void 0;try{n=[{bittype:3,url:JSON.parse(e).hls_url}]}catch(e){i="获取playurl失败: "+e.message}var o=(0,s.buildPlayStreams)(n),u=o.definitions,r=o.highestDefintion;t(i,{err:i,definitions:u,highestDefintion:r})})}),v=function(e,t){(0,u.default)([d(e),p()],function(e,i){t(e,{singleVideoDefintions:i})})};t.getDefinitions=v}},[69])});